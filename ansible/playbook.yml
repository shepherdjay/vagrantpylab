---
- hosts: development ansible_become=true
  tasks:
  - name: Setup Yum Tools and IUS
    yum: name={{ item }}
    with_items:
      - yum-utils
      - "@Development tools"
      - https://centos7.iuscommunity.org/ius-release.rpm

  - name: Install Pip for Python 2
    yum: name=python-pip

  - name: Install Python2 virtualenv
    pip: name=virtualenv executable=pip2.7

  - name: Python2 Development VirtualEnv
    pip: name={{ item }} virtualenv=/home/vagrant/venvs/python2 virtualenv_python=python2.7
    with_items:
       - mock
       - pytest

  - name: Install Python 3
    yum: name={{ item }}
    with_items:
      - https://centos7.iuscommunity.org/ius-release.rpm
      - python35u
      - python35u-devel
      - python35u-pip

  - name: Install Python3 virtualenv
    pip: name=virtualenv executable=pip3.5

  - name: Python3 Development VirtualEnv
    pip: name={{ item }} virtualenv=/home/vagrant/venvs/python3 virtualenv_python=python3.5
    with_items:
       - mock
       - pytest

